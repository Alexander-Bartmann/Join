<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: startseite.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: startseite.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** 
 * An array containing page names that require scripts to be dynamically loaded.
 * @constant {string[]}
 */
const pagesWithScripts = ["summary", "addTask", "board", "contacts"];

/**
 * Stores the current user's name.
 * @type {string}
 */
let currentUserName = "";

/**
 * Loads user data when the page is fully loaded.
 * @event window#onload
 */
window.onload = loadUserData;

/**
 * The main content container for dynamically loaded pages.
 * @type {HTMLElement}
 */
const content = document.getElementById("main-content");

/**
 * Array of navigation bar link elements for handling page navigation.
 * @type {HTMLElement[]}
 */
const navbarLinks = [
    document.getElementById("summaryLink"),
    document.getElementById("addTaskLink"),
    document.getElementById("boardLink"),
    document.getElementById("contactsLink"),
    document.getElementById("privacyPolicy"),
    document.getElementById("legalNotice"),
    document.getElementById("help"),
    document.getElementById("login")
];

/**
 * Loads user data and displays the user's initials. If no user data is found, defaults to "G".
 * @async
 * @function loadUserData
 * @returns {Promise&lt;void>}
 */
async function loadUserData() {
    const isGuest = sessionStorage.getItem('isGuestAccount') === 'true';
    if (isGuest) {
        document.getElementById('user-initials').textContent = 'G';
        return;
    }
    const userId = sessionStorage.getItem('loggedInUserId');
    if (!userId) return;
    try {
        const userData = await fetchUserFromFirebase(userId);
        const initials = getInitials(userData.name);
        document.getElementById('user-initials').textContent = initials;
    } catch (error) {
        console.error('Error loading user data:', error);
        document.getElementById('user-initials').textContent = 'G';
    }
}

/**
 * Fetches user data from Firebase based on the given user ID.
 * @async
 * @function fetchUserFromFirebase
 * @param {string} userId - The ID of the user to fetch data for.
 * @returns {Promise&lt;Object>} - A promise resolving to the user data.
 * @throws Will throw an error if the user data cannot be retrieved.
 */
async function fetchUserFromFirebase(userId) {
    const response = await fetch(`${BASE_URL}User/${userId}.json`);
    if (!response.ok) {
        throw new Error('Failed to fetch user data');
    }
    const userData = await response.json();
    return userData;
}

/**
 * Extracts the initials from a user's full name.
 * @function getInitials
 * @param {string} name - The full name of the user.
 * @returns {string} - The initials of the user, or "G" if the name is not provided.
 */
function getInitials(name) {
    if (!name) return 'G';
    const nameParts = name.split(' ');
    const firstInitial = nameParts[0]?.charAt(0).toUpperCase();
    const lastInitial = nameParts[1]?.charAt(0).toUpperCase();
    return firstInitial + (lastInitial || '');
}

/**
 * Dynamically loads a page, including its HTML, CSS, and optional script.
 * @async
 * @function loadPage
 * @param {string} page - The name of the page to load.
 * @returns {Promise&lt;void>}
 */
async function loadPage(page) {
    try {
        await loadHtml(page);
        await loadCss(page);
        await loadScript(page);
        checkForLoadedPage(page);
    } catch (error) {
        content.innerHTML = `&lt;p>An error occurred: ${error.message}&lt;/p>`;
    }
}

/**
 * Checks the page being loaded and initializes its specific functionality if applicable.
 * @function checkForLoadedPage
 * @param {string} page - The name of the page being loaded.
 */
function checkForLoadedPage(page) {
    if (page === "summary" &amp;&amp; typeof initSummary === "function") {
        initSummary();
    }
    if (page === "board" &amp;&amp; typeof initBoards === "function") {
        initBoards();
    }
    if (page === "addTask" &amp;&amp; typeof initAddTask === "function") {
        initAddTask();
    }
}

/**
 * Loads the HTML content of a page into the main content container.
 * @async
 * @function loadHtml
 * @param {string} page - The name of the page whose HTML is to be loaded.
 * @returns {Promise&lt;void>}
 * @throws Will throw an error if the HTML file cannot be loaded.
 */
async function loadHtml(page) {
    const response = await fetch(`${page}.html`);
    if (response.ok) {
        const html = await response.text();
        content.innerHTML = html;
    } else {
        throw new Error(`Failed to load page ${page}.html`);
    }
}

/**
 * Dynamically loads the CSS file for a specific page.
 * @async
 * @function loadCss
 * @param {string} page - The name of the page whose CSS is to be loaded.
 * @returns {Promise&lt;void>}
 */
async function loadCss(page) {
    const cssResponse = await fetch(`./styles/${page}.css`);
    if (cssResponse.ok) {
        const dynamicCss = document.getElementById("dynamic-css");
        if (dynamicCss) {
            dynamicCss.href = `./styles/${page}.css`;
        } else {
            document.head.innerHTML += `&lt;link id="dynamic-css" rel="stylesheet" href="./styles/${page}.css">`;
        }
    } else {
        console.log(`No CSS file found for ${page}`);
    }
}

/**
 * Dynamically loads and executes the JavaScript file for a specific page, if required.
 * @async
 * @function loadScript
 * @param {string} page - The name of the page whose script is to be loaded.
 * @returns {Promise&lt;void>}
 */
async function loadScript(page) {
    try {
        if (!pagesWithScripts.includes(page)) {
            return;
        }
        const scriptUrl = `./scripts/${page}.js`;
        const scriptResponse = await fetch(scriptUrl);
        if (scriptResponse.ok) {
            const scriptText = await scriptResponse.text();
            eval(scriptText);
        }
    } catch (error) {
        console.error(`Error loading JS for ${page}:`, error);
    }
}

/**
 * Initializes page navigation by adding event listeners to navigation links.
 * @function navbarLinks#forEach
 */
navbarLinks.forEach((link) => {
    if (link) {
        link.onclick = function (event) {
            event.preventDefault();
            const page = this.dataset.page;
            loadPage(page);
        };
    }
});

/**
 * Immediately invoked function expression (IIFE) to load the initial start page.
 * @async
 * @function initStartPage
 * @returns {Promise&lt;void>}
 */
(async function initStartPage() {
    await loadPage("summary");
})();

/**
 * Toggles the visibility of the menu container by adding or removing a 'hidden' class.
 * @function toggleMenu
 */
function toggleMenu() {
    const menu = document.getElementById('menu-container');
    menu.classList.toggle('hidden');
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Events</h3><ul><li><a href="window.html#event:onload">onload</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addAccountData">addAccountData</a></li><li><a href="global.html#addDNone">addDNone</a></li><li><a href="global.html#addSubtask">addSubtask</a></li><li><a href="global.html#addTaskInBoard">addTaskInBoard</a></li><li><a href="global.html#addToNewGroup">addToNewGroup</a></li><li><a href="global.html#cancelCreateContact">cancelCreateContact</a></li><li><a href="global.html#cancelEdit">cancelEdit</a></li><li><a href="global.html#changeTaskFields">changeTaskFields</a></li><li><a href="global.html#changeToDropOffJson">changeToDropOffJson</a></li><li><a href="global.html#checkAndPutToServer">checkAndPutToServer</a></li><li><a href="global.html#checkAwait">checkAwait</a></li><li><a href="global.html#checkEverythingInTask">checkEverythingInTask</a></li><li><a href="global.html#checkForAddedUsers">checkForAddedUsers</a></li><li><a href="global.html#checkForCategory">checkForCategory</a></li><li><a href="global.html#checkForExistingAccount">checkForExistingAccount</a></li><li><a href="global.html#checkForGreeting">checkForGreeting</a></li><li><a href="global.html#checkForImportance">checkForImportance</a></li><li><a href="global.html#checkForLoadedPage">checkForLoadedPage</a></li><li><a href="global.html#checkForMailAdress">checkForMailAdress</a></li><li><a href="global.html#checkForSubtasks">checkForSubtasks</a></li><li><a href="global.html#checkForUrgent">checkForUrgent</a></li><li><a href="global.html#checkInProgress">checkInProgress</a></li><li><a href="global.html#checkToDo">checkToDo</a></li><li><a href="global.html#clearInputs">clearInputs</a></li><li><a href="global.html#clearInuptField">clearInuptField</a></li><li><a href="global.html#closeContactInfo">closeContactInfo</a></li><li><a href="global.html#contactSelected">contactSelected</a></li><li><a href="global.html#content">content</a></li><li><a href="global.html#createContact">createContact</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#currentUserName">currentUserName</a></li><li><a href="global.html#deleteContact">deleteContact</a></li><li><a href="global.html#deleteSubtask">deleteSubtask</a></li><li><a href="global.html#deleteTaskFromBoard">deleteTaskFromBoard</a></li><li><a href="global.html#displayContactInfo">displayContactInfo</a></li><li><a href="global.html#displayCounts">displayCounts</a></li><li><a href="global.html#dragoverHandler">dragoverHandler</a></li><li><a href="global.html#dragstartHandler">dragstartHandler</a></li><li><a href="global.html#dropHandler">dropHandler</a></li><li><a href="global.html#editContact">editContact</a></li><li><a href="global.html#editSubtask">editSubtask</a></li><li><a href="global.html#editTaskInBoard">editTaskInBoard</a></li><li><a href="global.html#fetchContacts">fetchContacts</a></li><li><a href="global.html#fetchUserFromFirebase">fetchUserFromFirebase</a></li><li><a href="global.html#finalizeContactEditing">finalizeContactEditing</a></li><li><a href="global.html#findCurrentLetter">findCurrentLetter</a></li><li><a href="global.html#gatherAllTaskData">gatherAllTaskData</a></li><li><a href="global.html#getAddedContacts">getAddedContacts</a></li><li><a href="global.html#getAndDisplayName">getAndDisplayName</a></li><li><a href="global.html#getCategory">getCategory</a></li><li><a href="global.html#getContactInfoTemplate">getContactInfoTemplate</a></li><li><a href="global.html#getContacts">getContacts</a></li><li><a href="global.html#getContactsWithThisLetter">getContactsWithThisLetter</a></li><li><a href="global.html#getCurrentMailForButtons">getCurrentMailForButtons</a></li><li><a href="global.html#getCurrentMovedTask">getCurrentMovedTask</a></li><li><a href="global.html#getEditedContactInputs">getEditedContactInputs</a></li><li><a href="global.html#getGreeting">getGreeting</a></li><li><a href="global.html#getInitials">getInitials</a></li><li><a href="global.html#getInitialsOfAddedUser">getInitialsOfAddedUser</a></li><li><a href="global.html#getInitialsOfAddedUsers">getInitialsOfAddedUsers</a></li><li><a href="global.html#getLetterGroups">getLetterGroups</a></li><li><a href="global.html#getLoadContactTemplate">getLoadContactTemplate</a></li><li><a href="global.html#getNewTaskInfo">getNewTaskInfo</a></li><li><a href="global.html#getPriority">getPriority</a></li><li><a href="global.html#getRandomColor">getRandomColor</a></li><li><a href="global.html#getToDoTasks">getToDoTasks</a></li><li><a href="global.html#getUrgentAmount">getUrgentAmount</a></li><li><a href="global.html#getUserCount">getUserCount</a></li><li><a href="global.html#goToSignUp">goToSignUp</a></li><li><a href="global.html#initAddTask">initAddTask</a></li><li><a href="global.html#initBoards">initBoards</a></li><li><a href="global.html#initLogin">initLogin</a></li><li><a href="global.html#initStartPage">initStartPage</a></li><li><a href="global.html#initSummary">initSummary</a></li><li><a href="global.html#loadAll">loadAll</a></li><li><a href="global.html#loadContacts">loadContacts</a></li><li><a href="global.html#loadContactsSecondFunction">loadContactsSecondFunction</a></li><li><a href="global.html#loadCss">loadCss</a></li><li><a href="global.html#loadHtml">loadHtml</a></li><li><a href="global.html#loadPage">loadPage</a></li><li><a href="global.html#loadScript">loadScript</a></li><li><a href="global.html#loadUserData">loadUserData</a></li><li><a href="global.html#loginWithAccount">loginWithAccount</a></li><li><a href="global.html#logoSlideIn">logoSlideIn</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#modifyContacts">modifyContacts</a></li><li><a href="global.html#navbarLinks">navbarLinks</a></li><li><a href="global.html#pagesWithScripts">pagesWithScripts</a></li><li><a href="global.html#postAccoundData">postAccoundData</a></li><li><a href="global.html#putAllTasksToServer">putAllTasksToServer</a></li><li><a href="global.html#putEditedTaskToServer">putEditedTaskToServer</a></li><li><a href="global.html#putTaskToServer">putTaskToServer</a></li><li><a href="global.html#putToServer">putToServer</a></li><li><a href="global.html#putUserAmountToServer">putUserAmountToServer</a></li><li><a href="global.html#reloadPage">reloadPage</a></li><li><a href="global.html#removeFromOldGroup">removeFromOldGroup</a></li><li><a href="global.html#renderAddContactForm">renderAddContactForm</a></li><li><a href="global.html#renderAllSubtasks">renderAllSubtasks</a></li><li><a href="global.html#renderAllTasks">renderAllTasks</a></li><li><a href="global.html#renderAwaitFeedback">renderAwaitFeedback</a></li><li><a href="global.html#renderCategoryTechnical">renderCategoryTechnical</a></li><li><a href="global.html#renderCategoryUser">renderCategoryUser</a></li><li><a href="global.html#renderClosestDate">renderClosestDate</a></li><li><a href="global.html#renderContact">renderContact</a></li><li><a href="global.html#renderDetails">renderDetails</a></li><li><a href="global.html#renderDone">renderDone</a></li><li><a href="global.html#renderInProgress">renderInProgress</a></li><li><a href="global.html#renderInitials">renderInitials</a></li><li><a href="global.html#renderNoteToEdit">renderNoteToEdit</a></li><li><a href="global.html#renderSubtasks">renderSubtasks</a></li><li><a href="global.html#renderTasksinBoard">renderTasksinBoard</a></li><li><a href="global.html#renderToDo">renderToDo</a></li><li><a href="global.html#renderUrgent">renderUrgent</a></li><li><a href="global.html#resetAllBoards">resetAllBoards</a></li><li><a href="global.html#resetAllVars">resetAllVars</a></li><li><a href="global.html#resetContactList">resetContactList</a></li><li><a href="global.html#saveContacts">saveContacts</a></li><li><a href="global.html#saveEditedContact">saveEditedContact</a></li><li><a href="global.html#saveSubtask">saveSubtask</a></li><li><a href="global.html#searchTasksInBoard">searchTasksInBoard</a></li><li><a href="global.html#setAwaitFeedbackTaskCount">setAwaitFeedbackTaskCount</a></li><li><a href="global.html#setDoneTaskCount">setDoneTaskCount</a></li><li><a href="global.html#setInProgressTaskCount">setInProgressTaskCount</a></li><li><a href="global.html#setToDoTaskCount">setToDoTaskCount</a></li><li><a href="global.html#setUsersAmount">setUsersAmount</a></li><li><a href="global.html#subtaskSelected">subtaskSelected</a></li><li><a href="global.html#toggleMenu">toggleMenu</a></li><li><a href="global.html#toggleNoteDetails">toggleNoteDetails</a></li><li><a href="global.html#updateAllTaskCounts">updateAllTaskCounts</a></li><li><a href="global.html#updateAndUploadAllTaskCounts">updateAndUploadAllTaskCounts</a></li><li><a href="global.html#updateTask">updateTask</a></li><li><a href="global.html#uploadAllTaskCounts">uploadAllTaskCounts</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Dec 16 2024 16:12:52 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
